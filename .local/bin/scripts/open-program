#!/bin/sh

# open a file with an available program
# TODO: add more versatile filetype detection, wl/x11 separation

# update the user profile
[ -r "$HOME/.profile" ] && . "$HOME/.profile"

# load shell functions
[ -r "${XDG_CONFIG_HOME:-$HOME/.config}/shell/functions" ] && . "${XDG_CONFIG_HOME:-$HOME/.config}/shell/functions"

case "$1" in
    browser)
        setsid -f $BROWSER "$2"
        ;;
    file-manager)
        setsid -f $FILEMGR "$2"
        ;;
    document-reader)
        setsid -f $READER "$2"
        ;;
    image-viewer)
        setsid -f $IMGVIEWER "$2"
        ;;
    text-editor)
        [ "$EDITOR_GUI" = "y" ] && {
            setsid -f $EDITOR "$2"
        } || {
            setsid -f xdg-terminal-exec $EDITOR "$2"
        }
        ;;
    video-player)
        setsid -f $VPLAYER "$2"
        ;;
    audio-player)
        ;;
esac
